function send_msg(token, msg, channel_id) {
  req = new XMLHttpRequest();
  req.open("POST", `https://discord.com/api/v9/channels/${channel_id}/messages`);
  payload = {'content': msg};
  req.setRequestHeader("authorization", token);
  req.setRequestHeader("content-type", "application/json")
  req.onload = function() {console.log(this.responseText);};
  req.send(JSON.stringify(payload));
}

function main() {
  login_token = document.createElement("button");
  login_token.style.left = '10px';
  login_token.style.top = '10px';
  login_token.innerHTML = 'login token';
  login_token.style.position = 'fixed';
  login_token.style.font = 'inherit';
  login_token.style.width = '50px';
  login_token.style.height = '50px';
  login_token.id = 'login_token';
  login_token.onclick = function login_token(button) {
    token = prompt('token');
    window.alert(token);
    req = new XMLHttpRequest();
    req.open("GET", "https://discord.com/api/v9/users/@me");
    req.setRequestHeader("authorization", token);
    req.responseType = 'json';
    req.onload = function() {
      window.alert(JSON.stringify(this.response));
      if (this.response['code'] !== 0){
          if (this.response['id'] !== '') {
              window.alert(JSON.stringify(this.response));
              l_t = document.getElementById('login_token');
              l_t.remove();
              l_e_p = document.getElementById('login_email_pass');
              l_e_p.remove();
          };
      };
    };
    req.send();
  };
  login_email_pass = document.createElement("button");
  login_email_pass.style.left = '60px';
  login_email_pass.style.top = '10px';
  login_email_pass.innerHTML = 'login email and pass';
  login_email_pass.style.position = 'fixed';
  login_email_pass.style.font = 'inherit';
  login_email_pass.style.width = '70px';
  login_email_pass.style.height = '100px';
  login_email_pass.id = 'login_email_pass';
  login_email_pass.onclick = function login_pass_email() {
    email = prompt('email');
    pass = prompt('password');
    
  };
  document.body.appendChild(login_token);
  document.body.appendChild(login_email_pass);
};
main();
